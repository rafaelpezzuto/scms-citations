{"version":3,"names":[],"mappings":"","sources":["scielo-ds.js"],"sourcesContent":["var ads__formControl = {\n    ListenerNamespace: \"ads\",\n    ListenerValidate: \"ads-validate\",\n    Init: function() {\n        var _self = this,\n            fields = _self.SelectFields(),\n            frm = _self.SelectNeedsValidation();\n\n        fields.forEach(function() {\n            _self.CheckIfHasLabel(this);\n            _self.SetFieldWithValue(this);\n            _self.CheckIfMultiple(this);\n            _self.CheckIfPlaceholder(this);\n            _self.CheckIfDisabled(this);\n            _self.CheckIfSearch(this);\n            _self.CheckIfDatepicker(this);\n            _self.CheckSize(this);\n            _self.ObserveFieldDisability(this);\n            // _self.ApplyMask(this);\n        });\n\n        _self.ApplyChangeBehavior(fields);\n        _self.ApplyFocusBlurBehavior(fields);\n        //_self.ApplyKeyupBehavior(fields);\n        _self.ApplySubmitBehavior(frm);\n    },\n    SelectFields: function() {\n        var onlyVisibleItens = document.querySelectorAll(\".ads__form-control > input, .ads__form-file > input\"),\n            itens = document.querySelectorAll(\".ads__form-control > textarea, .ads__form-select > select\");\n        \n        onlyVisibleItens.forEach(function() {\n            var style = window.getComputedStyle(this);\n            if(style && (style.display !== 'none') || (style.visibility !== 'hidden'))\n                itens.push(this);\n        });\n\n        return itens;\n    },\n    SelectNeedsValidation: function() {\n        return document.querySelectorAll(\".needs-validation, .ads__form-needs-validation\");\n    },\n    ApplyChangeBehavior: function(field) {\n        var _self = this;\n\n        if(field[0] && field[0].parentNode.classList.contains(\"ads__form-file\"))\n            _self.RecordOriginalLabel(field[0]);\n\n        field.addEventListener(\"change.\"+_self.ListenerNamespace,function() {\n            _self.SetFieldWithValue(this);\n            _self.CheckIfDisabled(this);\n            \n            if(this.parentNode.classList.contains(\"b3__form-file\")) {\n                _self.SetFilenameToLabel(this);\n            }\n        });\n    },\n    ApplyFocusBlurBehavior: function(field) {\n        var _self = this;\n\n        field.addEventListener(\"focus.\"+_self.ListenerNamespace,function() {\n            _self.SetFieldFocused(this,true);\n        }).addEventListener(\"blur.\"+_self.ListenerNamespace,function() {\n            _self.SetFieldFocused(this,false);\n        });\n    },\n    ApplyKeyupBehavior: function(field) {\n        var _self = this;\n\n        field.addEventListener(\"blur.\"+_self.ListenerNamespace,function() {\n            _self.SetValidInvalid(this);\n        });\n    },\n    ApplySubmitBehavior: function(frm) {\n        var _self = this;\n\n        frm.addEventListener(\"submit.\"+_self.ListenerNamespace,function(e) {\n            if (this.checkValidity() === false) {\n                event.preventDefault();\n                event.stopPropagation();\n            }\n\n            var fields = this.querySelectorAll('input:required:not([hidden]), select:required:not([hidden]), textarea:required:not([hidden])');\n            fields.forEach(function(field) {\n                _self.SetValidInvalid(field);\n            });\n            \n            this.classList.add('was-validated');\n        });\n    },\n    ApplyMask: function(field) {\n        var _self = this,\n            rtn = false,\n            input = $(field),\n            maskDefaults = {\n                watchInterval: 10,\n                clearIfNotMatch: true,\n                dataMask: false,\n                translation:  {\n                    'a': {pattern: /[a-zA-Z]/},\n                    '*': {pattern: /[a-zA-Z0-9]/},\n                    '?': {pattern: /\\d/, optional: true},\n                    '9': {pattern: /\\d/, optional: false},\n                }\n            };\n        \n        if(input.data(\"b3Mask\") != undefined){\n            var b3mask = input.data(\"b3Mask\"),\n                b3maskReverse = input.data(\"b3MaskReverse\") != undefined && input.data(\"b3MaskReverse\") == true ? true : false,\n                maskToApply = _self.SetMaskValue(b3mask, input);\n\n            if(maskToApply != null) \n                input.unmask().mask(maskToApply, !b3maskReverse ? maskDefaults : {reverse: true}).off(\"blur.\"+_self.ListenerValidate);\n\n            input.addEventListener(\"change.\"+_self.ListenerValidate,function(){\n                _self.SetMaskValidate(field, b3mask);\n            });\n\n            rtn = true;\n        }\n            \n        return rtn;\n    },\n    SetMaskValue: function(mask) {\n        var b3mask = \"\";\n\n        switch(mask) {\n            case \"date\":\n                b3mask = \"99/99/9999\";\n                break;\n            case \"time\":\n                b3mask = \"00:00\";\n                break;\n            case \"phone\":\n                b3mask = \"(99) 9999.9999?9\";\n                break;\n            case \"cpf\":\n                b3mask = \"999.999.999-99\";\n                break;\n            case \"cnpj\":\n                b3mask = \"99.999.999/9999-99\";\n                break;\n            case \"cep\":\n                b3mask = \"99999-999\";\n                break;\n            case \"money\":\n                b3mask = \"#.##0,00\";\n                break;\n            case \"email\":\n                b3mask = null;\n                break;\n            default:\n                b3mask = mask;\n                break;\n        }\n\n        return b3mask;\n    },\n    SetMaskValidate: function(field, mask) {\n        var _self = this,\n            status = false;\n\n        switch(mask) {\n            case \"date\":\n                status = _self.ValidateDate(field.value);\n                break;\n            case \"email\":\n                status = _self.ValidateMail(field.value);\n                break;\n            case \"phone\":\n                status = _self.ValidatePhone(field.value);\n                break;\n            case \"cpf\":\n                status = _self.ValidateCPF(field.value);\n                break;\n            case \"cnpj\":\n                status = _self.ValidateCNPJ(field.value);\n                break;\n            case \"time\":\n                status = _self.ValidateTime(field.value);\n                break;\n            default:\n                status = true;\n                break;\n        }\n\n        field.setAttribute(\"data-valid\",status);\n        _self.SetValidInvalid(field);\n    },\n    SetFieldWithValue: function(obj) {\n        obj.parentNode.classList.toggle(\"has-value\",obj.value != '');\n    },\n    CheckIfMultiple: function(obj) {\n        obj.parentNode.classList.toggle(\"is-multiple\",obj.multiple);\n    },\n    CheckIfPlaceholder: function(obj) {\n        obj.parentNode.classList.toggle(\"has-placeholder\",obj.placeholder && obj.placeholder != '')\n    },\n    CheckIfHasLabel: function(obj) {\n        obj.parentNode.classList.toggle(\"not-label\",obj.parentNode.querySelectorAll(\"label\").length == 0);\n    },\n    CheckIfDisabled: function(obj) {\n        obj.parentNode.classList.toggle(\"is-disabled\",obj.disabled);\n    },\n    CheckIfSearch: function(obj) {\n        obj.parentNode.classList.toggle(\"is-search\",obj.type == 'search');\n        obj.parentNode.parentNode.classList.toggle(\"is-search\",obj.parentNode.parentNode.classList.contains(\"input-group\"));\n    },\n    CheckIfDatepicker: function(obj) {\n        obj.parentNode.classList.toggle(\"is-datepicker\",obj.classList.contains(\"b3__form-datepicker\"));\n    },\n    CheckSize: function(obj) {\n        obj.parentNode.classList.toggle(\"large\",obj.parentNode.classList.contains(\"large\") || obj.classList.contains('form-control-lg'));\n        obj.parentNode.classList.toggle(\"small\",obj.parentNode.classList.contains(\"small\") || obj.classList.contains('form-control-sm'));\n    },\n    SetFieldFocused: function(obj,focused) {\n        obj.parentNode.classList.toggle(\"is-focused\",focused);\n    },\n    SetValidInvalid: function(obj) {\n        var dataValidate = typeof obj.dataset.valid != \"undefined\" ? true : false,\n            parseValidate =  !dataValidate ? false : JSON.parse(obj.dataset.valid);\n\n        obj.parentNode.classList.toggle(\"is-valid\", dataValidate ? parseValidate : obj.validity.valid);\n        obj.parentNode.classList.toggle(\"is-invalid\", dataValidate ? !parseValidate : !obj.validity.valid);\n    },\n    RecordOriginalLabel: function(obj) {\n        var label = obj.parentNode.querySelector(\"label\");\n        label.data(\"label\",label.text());\n    },\n    SetFilenameToLabel: function(obj) {\n        var filename = obj.value,\n            label = obj.parentNode.querySelector(\"label\");\n\n        filename = filename.replace(/\\\\/g, '/').replace(/.*\\//, '');\n\n        if(filename == '') filename = label.data(\"label\");\n        label.html(filename);\n    },\n    ObserveFieldDisability: function(obj) {\n        var observer = new MutationObserver(function(mutations) {\n                for (var i=0, mutation; mutation = mutations[i]; i++) {\n                    obj.parentNode.classList.toggle(\"is-disabled\",mutation.attributeName == 'disabled' && mutation.target.disabled);\n                }\n            });\n        \n        observer.observe(obj, {attributes: true});\n    },\n    ValidateCPF: function(cpf) {\n        var cpf = cpf.replace(/[^\\d]+/g,'');\n\n\t\tvar Soma;\n\t\tvar Resto;\n\t\tSoma = 0;\n\t\t\n\t\tif (\n\t\t\t\tcpf == \"00000000000\" ||\n\t\t\t\tcpf == \"11111111111\" ||\n\t\t\t\tcpf == \"22222222222\" ||\n\t\t\t\tcpf == \"33333333333\" ||\n\t\t\t\tcpf == \"44444444444\" ||\n\t\t\t\tcpf == \"55555555555\" ||\n\t\t\t\tcpf == \"66666666666\" ||\n\t\t\t\tcpf == \"77777777777\" ||\n\t\t\t\tcpf == \"88888888888\" ||\n\t\t\t\tcpf == \"99999999999\"\n\t\t\t) return false;\n\t     \n\t\tfor (i=1; i<=9; i++) Soma = Soma + parseInt(cpf.substring(i-1, i)) * (11 - i);\n\t\tResto = (Soma * 10) % 11;\n\t     \n\t\tif ((Resto == 10) || (Resto == 11))  Resto = 0;\n\t\tif (Resto != parseInt(cpf.substring(9, 10)) ) return false;\n\t     \n\t\tSoma = 0;\n\t\tfor (i = 1; i <= 10; i++) Soma = Soma + parseInt(cpf.substring(i-1, i)) * (12 - i);\n\t\tResto = (Soma * 10) % 11;\n\t     \n\t\tif ((Resto == 10) || (Resto == 11))  Resto = 0;\n\t\tif (Resto != parseInt(cpf.substring(10, 11) ) ) return false;\n\n\t\treturn true;\n    },\n\tValidateCNPJ: function(cnpj) {\n\t\tcnpj = cnpj.replace(/[^\\d]+/g,'');\n \n\t\tif (cnpj == '') return false;\n\t\tif (cnpj.length != 14) return false;\n \n\t\t// Elimina CNPJs invalidos conhecidos\n\t\tif (cnpj == \"00000000000000\" || \n\t\t\tcnpj == \"11111111111111\" || \n\t\t\tcnpj == \"22222222222222\" || \n\t\t\tcnpj == \"33333333333333\" || \n\t\t\tcnpj == \"44444444444444\" || \n\t\t\tcnpj == \"55555555555555\" || \n\t\t\tcnpj == \"66666666666666\" || \n\t\t\tcnpj == \"77777777777777\" || \n\t\t\tcnpj == \"88888888888888\" || \n\t\t\tcnpj == \"99999999999999\")\n\t\treturn false;\n\n\t\ttamanho = cnpj.length - 2\n\t\tnumeros = cnpj.substring(0,tamanho);\n\t\tdigitos = cnpj.substring(tamanho);\n\t\tsoma = 0;\n\t\tpos = tamanho - 7;\n\n\t\tfor (i = tamanho; i >= 1; i--) {\n\t\t\tsoma += numeros.charAt(tamanho - i) * pos--;\n\t\t\tif (pos < 2) pos = 9;\n\t\t}\n\t\tresultado = soma % 11 < 2 ? 0 : 11 - soma % 11;\n\n\t\tif (resultado != digitos.charAt(0)) return false;\n         \n\t\ttamanho = tamanho + 1;\n\t\tnumeros = cnpj.substring(0,tamanho);\n\t\tsoma = 0;\n\t\tpos = tamanho - 7;\n\t\tfor (i = tamanho; i >= 1; i--) {\n\t\t\tsoma += numeros.charAt(tamanho - i) * pos--;\n\t\t\tif (pos < 2) pos = 9;\n\t\t}\n\t\tresultado = soma % 11 < 2 ? 0 : 11 - soma % 11;\n\t\t\n\t\tif (resultado != digitos.charAt(1)) return false;\n           \n\t\treturn true;\n    },\n    ValidatePhone: function(num) {\n        var rtn = true;\n        num = num.replace(/\\(/g,\"\").replace(/\\)/g,\"\").replace(/ /g,\"\").replace(/\\./g,\"\");\n\n        if(num !== \"\") {\n            if(\n                num.indexOf(\"0000000\") > -1 ||\n                num.indexOf(\"1111111\") > -1 ||\n                num.indexOf(\"2222222\") > -1 ||\n                num.indexOf(\"3333333\") > -1 ||\n                num.indexOf(\"4444444\") > -1 ||\n                num.indexOf(\"5555555\") > -1 ||\n                num.indexOf(\"6666666\") > -1 ||\n                num.indexOf(\"7777777\") > -1 ||\n                num.indexOf(\"8888888\") > -1 ||\n                num.indexOf(\"9999999\") > -1\n                ) {\n                rtn = false;\t\n            } \n        }\n\n        return rtn;\n    },\n\tValidateMail: function(email) { \n\t\tvar re = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\t\treturn re.test(email);\n    },\n    ValidateDate: function(date) {\n        var v = date,\n            status = true;\n\n        v = v.split(\"/\");\n        \n        var vDate = new Date(v[2],(parseInt(v[1])-1),v[0]);\n\n        if(v !== \"\" &&  (parseInt(v[0]) !== parseInt(vDate.getDate()) || parseInt(v[1]) !== (parseInt(vDate.getMonth())+1))) {\n            status = false;\n        }\n\n        return status;\n    },\n    ValidateTime: function(time) {\n        var status = true;\n\n        time = time.split(\":\");\n\n        if(parseInt(time[0]) > 23 || parseInt(time[1]) > 60)\n            status = false;\n\n        return status;\n    }\n};\nvar ads__organism = {\n\tInit: function() {\n\t\t\tthis.Organism();\n\t},\n\tOrganism: function() {\n\t\tvar year = document.querySelector(\".ads__footter-year\");\n\t\t\n\t\tif(year !== null) {\n\t\t\tvar d = new Date();\n\t\t\tyear.innerHTML = d.getFullYear();\n\t\t}\n\t}\n};\nvar ads__navControl = {\n    Init: function() {\n        this.DropdownContextFix();\n    },\n    DropdownContextFix: function() {\n        document.querySelectorAll(\".dropdown-pane, .dropdown-menu, .dropdown.menu .is-dropdown-submenu-parent, .card, .modal-dialog\").forEach(function() {\n            this.classList.add(\"ads__theme--light\");\n        });\n    }\n};\nvar ads__chart = {\n\tColors: function(type, idx, rgba) {\n\t\tvar rtn = [];\n\n\t\tcolorsTypes = {\n\t\t\tbar: [\n\t\t\t\t'rgb(0, 176, 234)',\n\t\t\t\t'rgb(17, 50, 116)',\n\t\t\t\t'rgb(0, 62, 120)',\n\t\t\t\t'rgb(246, 168, 84)',\n\t\t\t\t'rgb(255, 216, 98)',\n\t\t\t\t'rgb(255, 216, 98)',\n\t\t\t\t'rgb(0, 92, 168)',\n\t\t\t\t'rgb(90, 196, 241)',\n\t\t\t\t'rgb(160, 217, 247)',\n\t\t\t\t'rgb(93, 96, 97)',\n\t\t\t\t'rgb(77, 77, 77)'\n\t\t\t],\n\t\t\tline: [\n\t\t\t\t'rgb(0, 52, 117)',\n\t\t\t],\n\t\t\tradar: [\n\t\t\t\t'rgb(102, 110, 122)',\n\t\t\t\t'rgb(0, 176, 230)'\n\t\t\t]\n\t\t}\n\n\t\tif(type == 'bar'|| type == 'pie' || type == 'doughnut') {\n\t\t   rtn = colorsTypes.bar;\n\t\t} else if(type == 'radar') {\n\t\t\tif(rgba === true)\n\t\t\t\trtn = b3__chart.ConvertRGBToRGBA(colorsTypes.radar[idx]);\n\t\t\telse\n\t\t\t\trtn = colorsTypes.radar[idx];\n\t\t} else\n\t\t\trtn = colorsTypes.line;\n\n\t\treturn rtn \n\t},\n\tConvertRGBToRGBA: function(color){\n\t\tvar newColor = color.replace(/rgb/i, \"rgba\");\n\n\t\tnewColor = newColor.replace(/\\)/i,',0.2)');\n\n\t\treturn newColor;\n\t},\n\tInit: function() {\n\t\tif(typeof Chart != \"undefined\") {\n\t\t\tChart.defaults.global.defaultFontFamily = '\"Muli\",sans-serif';\n\t\t\tChart.defaults.global.elements.arc.borderWidth = 0;\n\t\t\tChart.defaults.global.elements.arc.hoverBorderWidth = 0;\n\t\t}\n\t}\n}\nvar ads__datepicker = {\n\tglobalConfigs: function() {\n\t\tjQuery.extend( jQuery.fn.pickadate.defaults, {\n\t\t\tmonthsFull: [ 'janeiro', 'fevereiro', 'março', 'abril', 'maio', 'junho', 'julho', 'agosto', 'setembro', 'outubro', 'novembro', 'dezembro' ],\n\t\t\tmonthsShort: [ 'jan', 'fev', 'mar', 'abr', 'mai', 'jun', 'jul', 'ago', 'set', 'out', 'nov', 'dez' ],\n\t\t\tweekdaysFull: [ 'domingo', 'segunda-feira', 'terça-feira', 'quarta-feira', 'quinta-feira', 'sexta-feira', 'sábado' ],\n\t\t\tweekdaysShort: [ 'dom', 'seg', 'ter', 'qua', 'qui', 'sex', 'sab' ],\n\t\t\tlabelMonthNext: 'Próximo',\n\t\t\tlabelMonthPrev: 'Anterior',\n\t\t\ttoday: 'hoje',\n\t\t\tclear: 'limpar',\n\t\t\tclose: 'fechar',\n\t\t\tformat: 'dd/mm/yyyy',\n\t\t\tformatSubmit: 'dd/mm/yyyy',\n\t\t\tonOpen: function() { document.querySelectorAll('pre').forEach(function() {\n\t\t\t\tthis.style.overflow = 'hidden';\n\t\t\t})},\n\t\t\tonClose: function() { document.querySelectorAll('pre').forEach(function() {\n\t\t\t\tthis.style.overflow = '';\n\t\t\t}) }\n\t\t});\n\t},\n\tInit: function() {\n\t\tif(typeof Picker != \"undefined\")\n\t\t\tthis.globalConfigs();\n\t}\n}\n// require _components/_datagrid.js\n\ndocument.addEventListener(\"DOMContentLoaded\", function() {\n    // ads__organism.Init();\n    // ads__datagrid.Init();\n    // ads__datepicker.Init();\n    // ads__chart.Init();\n    // ads__formControl.Init();\n    // ads__navControl.Init();\n    // ads__sidebar.Init();\n});\n"],"file":"scielo-ds.js"}